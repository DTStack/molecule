"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[77827],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return u}});var i=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=i.createContext({}),l=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=l(e.components);return i.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},p=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),p=l(n),u=o,g=p["".concat(s,".").concat(u)]||p[u]||m[u]||a;return n?i.createElement(g,r(r({ref:t},d),{},{components:n})):i.createElement(g,r({ref:t},d))}));function u(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,r=new Array(a);r[0]=p;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:o,r[1]=c;for(var l=2;l<a;l++)r[l]=n[l];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}p.displayName="MDXCreateElement"},26130:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return s},default:function(){return u},frontMatter:function(){return c},metadata:function(){return l},toc:function(){return m}});var i=n(87462),o=n(63366),a=(n(67294),n(3905)),r=["components"],c={title:"Keybinding",sidebar_label:"Keybinding"},s=void 0,l={unversionedId:"guides/extend-keybinding",id:"version-0.9.0-beta.2/guides/extend-keybinding",title:"Keybinding",description:"Monaco Editor has a very powerful Keybinding service built in. On this basis, Molecule has transplanted the abstract class of Action2 in VSCode. Developers can implement some custom actions by inheriting this Action2 object, and they can be triggered by shortcut keys, execution commands, Command Palette and so on.",source:"@site/versioned_docs/version-0.9.0-beta.2/guides/extend-keybinding.md",sourceDirName:"guides",slug:"/guides/extend-keybinding",permalink:"/molecule/docs/0.9.0-beta.2/guides/extend-keybinding",draft:!1,editUrl:"https://github.com/DTStack/molecule/edit/main/website/versioned_docs/version-0.9.0-beta.2/guides/extend-keybinding.md",tags:[],version:"0.9.0-beta.2",frontMatter:{title:"Keybinding",sidebar_label:"Keybinding"},sidebar:"docs",previous:{title:"Color Theme",permalink:"/molecule/docs/0.9.0-beta.2/guides/extend-color-theme"},next:{title:"QuickAccess",permalink:"/molecule/docs/0.9.0-beta.2/guides/extend-quick-access"}},d={},m=[{value:"Define Action object",id:"define-action-object",level:2},{value:"Register Action",id:"register-action",level:2},{value:"Actively execute Action",id:"actively-execute-action",level:2}],p={toc:m};function u(e){var t=e.components,n=(0,o.Z)(e,r);return(0,a.kt)("wrapper",(0,i.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://microsoft.github.io/monaco-editor/"},"Monaco Editor")," has a very powerful ",(0,a.kt)("strong",{parentName:"p"},"Keybinding")," service built in. On this basis, Molecule has transplanted the abstract class of ",(0,a.kt)("inlineCode",{parentName:"p"},"Action2")," in VSCode. Developers can implement some ",(0,a.kt)("strong",{parentName:"p"},"custom actions")," by inheriting this ",(0,a.kt)("inlineCode",{parentName:"p"},"Action2")," object, and they can be triggered by ",(0,a.kt)("strong",{parentName:"p"},"shortcut keys, execution commands, Command Palette")," and so on."),(0,a.kt)("p",null,"This part will elaborate on how to implement a custom ",(0,a.kt)("strong",{parentName:"p"},"Keybinding Action"),"."),(0,a.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"All code demos in this part are based on the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/DTStack/molecule-examples/tree/main/packages/molecule-demo"},"molecule-demo")," project in ",(0,a.kt)("a",{parentName:"p",href:"../quick-start"},"Quick Start"),"."))),(0,a.kt)("h2",{id:"define-action-object"},"Define Action object"),(0,a.kt)("p",null,"First, we define the ",(0,a.kt)("inlineCode",{parentName:"p"},"KeybindingAction")," object based on the ",(0,a.kt)("inlineCode",{parentName:"p"},"Action2")," abstract class:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/extensions/action/keybindingAction.ts"',title:'"src/extensions/action/keybindingAction.ts"'},"import {\n    Action2,\n    KeybindingWeight,\n} from '@dtinsight/molecule/esm/monaco/common';\nimport { KeyCode, KeyMod } from '@dtinsight/molecule/esm/monaco';\n//@ts-ignore\nimport { KeyChord } from 'monaco-editor/esm/vs/base/common/keyCodes';\n\nexport class KeybindingAction extends Action2 {\n    static readonly ID = 'AutoSave';\n\n    constructor() {\n        super({\n            id: KeybindingAction.ID,\n            precondition: undefined, // Define some precondition\n            f1: false, // Not show in the Command Palette\n            keybinding: {\n                weight: KeybindingWeight.WorkbenchContrib,\n                when: undefined,\n                primary: KeyChord(KeyMod.CtrlCmd | KeyCode.KEY_S),\n            },\n        });\n    }\n\n    run(accessor: any, ...args: any[]) {\n        alert('Save success!');\n        // do something\n    }\n}\n")),(0,a.kt)("p",null,"In the code, the ",(0,a.kt)("inlineCode",{parentName:"p"},"keybinding")," field is the main part of the shortcut key. We define a ",(0,a.kt)("inlineCode",{parentName:"p"},"Command/Ctrl + S")," ",(0,a.kt)("strong",{parentName:"p"},"key combination")," in ",(0,a.kt)("inlineCode",{parentName:"p"},"primary"),", which ",(0,a.kt)("strong",{parentName:"p"},"triggers")," the ",(0,a.kt)("inlineCode",{parentName:"p"},"run")," function to execute an ",(0,a.kt)("inlineCode",{parentName:"p"},"alert"),". The ",(0,a.kt)("inlineCode",{parentName:"p"},"id")," parameter is the ",(0,a.kt)("strong",{parentName:"p"},"ID")," of the current Action. We can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"executeCommand(actionId)")," method to ",(0,a.kt)("a",{parentName:"p",href:"#actively-execute-action"},"trigger")," this Action actively."),(0,a.kt)("h2",{id:"register-action"},"Register Action"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/extensions/action/index.ts"',title:'"src/extensions/action/index.ts"'},"activate(extensionCtx: IExtensionService): void {\n    // Register the Action\n    molecule.extension.registerAction(KeybindingAction);\n    // Or\n    // extensionCtx.registerAction(KeybindingAction);\n}\n")),(0,a.kt)("p",null,"The defined Action object needs to be registered by using the ",(0,a.kt)("inlineCode",{parentName:"p"},"registerAction")," method of the ",(0,a.kt)("a",{parentName:"p",href:"../api/classes/molecule.ExtensionService"},"ExtensionService")," object."),(0,a.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"The Action object also needs to be registered in the ",(0,a.kt)("inlineCode",{parentName:"p"},"activate")," phase of the extension to take effect."))),(0,a.kt)("h2",{id:"actively-execute-action"},"Actively execute Action"),(0,a.kt)("p",null,"In addition to using ",(0,a.kt)("a",{parentName:"p",href:"extend-keybinding"},"Keybinding")," and ",(0,a.kt)("strong",{parentName:"p"},"Command Palette")," to trigger ",(0,a.kt)("strong",{parentName:"p"},"Action"),", developers can also ",(0,a.kt)("strong",{parentName:"p"},"actively trigger")," the execution of Actions through the ",(0,a.kt)("a",{parentName:"p",href:"../api/classes/molecule.ExtensionService#executecommand"},"executeCommand")," method. Take ",(0,a.kt)("inlineCode",{parentName:"p"},"KeybindingAction")," as an example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"molecule.extension.executeCommand('AutoSave', args);\n")),(0,a.kt)("p",null,"The complete example can refer to ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/DTStack/molecule-examples/tree/main/packages/molecule-demo/src/extensions/action"},"molecule-examples"),"."))}u.isMDXComponent=!0}}]);