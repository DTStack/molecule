"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[72149],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return u}});var o=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},d=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},c=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),c=p(n),u=i,h=c["".concat(l,".").concat(u)]||c[u]||m[u]||r;return n?o.createElement(h,a(a({ref:t},d),{},{components:n})):o.createElement(h,a({ref:t},d))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,a=new Array(r);a[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,a[1]=s;for(var p=2;p<r;p++)a[p]=n[p];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}c.displayName="MDXCreateElement"},54731:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return l},default:function(){return u},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return m}});var o=n(87462),i=n(63366),r=(n(67294),n(3905)),a=["components"],s={title:"The First Extension",sidebar_label:"The First Extension",sidebar_position:1},l=void 0,p={unversionedId:"the-first-extension",id:"the-first-extension",title:"The First Extension",description:"In Molecule, all custom functions are done using Extension. Next, let us quickly learn how to write an extended application based on the molecule-demo project.",source:"@site/docs/the-first-extension.md",sourceDirName:".",slug:"/the-first-extension",permalink:"/molecule/docs/next/the-first-extension",draft:!1,editUrl:"https://github.com/DTStack/molecule/edit/main/website/docs/the-first-extension.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"The First Extension",sidebar_label:"The First Extension",sidebar_position:1},sidebar:"docs",previous:{title:"Quick Start",permalink:"/molecule/docs/next/quick-start"},next:{title:"Builtin",permalink:"/molecule/docs/next/guides/builtin"}},d={},m=[{value:"A simple scene",id:"a-simple-scene",level:2},{value:"Implementation",id:"implementation",level:2},{value:"Create Extension Object",id:"create-extension-object",level:3},{value:"Write control logic",id:"write-control-logic",level:3},{value:"Use extension",id:"use-extension",level:3},{value:"Complete Example",id:"complete-example",level:2}],c={toc:m};function u(e){var t=e.components,s=(0,i.Z)(e,a);return(0,r.kt)("wrapper",(0,o.Z)({},c,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"In Molecule, all custom functions are done using ",(0,r.kt)("a",{parentName:"p",href:"./guides/extension"},"Extension"),". Next, let us quickly learn how to write an extended application based on the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/DTStack/molecule-examples/tree/main/packages/molecule-demo/src/extensions/theFirstExtension"},"molecule-demo")," project."),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"All the codes are based on the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/DTStack/molecule-examples/tree/main/packages/molecule-demo"},"molecule-demo")," project in ",(0,r.kt)("a",{parentName:"p",href:"./quick-start"},"Quick Start"),"."))),(0,r.kt)("h2",{id:"a-simple-scene"},"A simple scene"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"The First Extension",src:n(12871).Z,width:"2880",height:"1642"})),(0,r.kt)("p",null,"As shown in the figure, we display series of code files in the ",(0,r.kt)("strong",{parentName:"p"},"FolderTree")," of ",(0,r.kt)("strong",{parentName:"p"},"Explorer"),". When the file is ",(0,r.kt)("strong",{parentName:"p"},"clicked")," by the mouse, it will be ",(0,r.kt)("strong",{parentName:"p"},"opened")," in the Editor on the right."),(0,r.kt)("p",null,"Molecule has some UI modules such as ",(0,r.kt)("a",{parentName:"p",href:"/molecule/docs/next/guides/extend-builtin-ui#explorer"},"Explorer"),"\uff0c",(0,r.kt)("a",{parentName:"p",href:"./guides/extend-builtin-ui#foldertree"},"FolderTree"),"\uff0c",(0,r.kt)("a",{parentName:"p",href:"./guides/extend-workbench#editor"},"Editor")," built in by default.\nTo achieve the functions in the above figure, these requirements can be quickly achieved through the API provided by it, and developers do not need to care too much about the construction of the UI."),(0,r.kt)("h2",{id:"implementation"},"Implementation"),(0,r.kt)("p",null,"First, we create a new ",(0,r.kt)("inlineCode",{parentName:"p"},"extensions")," folder under ",(0,r.kt)("inlineCode",{parentName:"p"},"src"),", then create a ",(0,r.kt)("inlineCode",{parentName:"p"},"theFirstExtension")," directory, and add the default module ",(0,r.kt)("inlineCode",{parentName:"p"},"index.ts"),", as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"src/extensions\n\u251c\u2500\u2500 index.ts\n\u2514\u2500\u2500 theFirstExtension\n    \u251c\u2500\u2500 folderTreeController.ts // folderTree\n    \u251c\u2500\u2500 index.ts\n")),(0,r.kt)("h3",{id:"create-extension-object"},"Create Extension Object"),(0,r.kt)("p",null,"We create a new class called ",(0,r.kt)("inlineCode",{parentName:"p"},"FirstExtension")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"index.ts"),", which implements the class ",(0,r.kt)("a",{parentName:"p",href:"./api/interfaces/molecule.model.IExtension"},"IExtension")," interface:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/extensions/theFirstExtension/index.ts"',title:'"src/extensions/theFirstExtension/index.ts"'},"import { IExtension } from '@dtinsight/molecule/esm/model/extension';\nimport { IExtensionService } from '@dtinsight/molecule/esm/services';\nimport * as folderTreeController from './folderTreeController';\n\nexport class FirstExtension implements IExtension {\n    id: string = 'TheFirstExtension';\n    name: string = 'The First Extension';\n\n    activate(extensionCtx: IExtensionService): void {\n        folderTreeController.initFolderTree();\n        folderTreeController.handleSelectFolderTree();\n    }\n\n    dispose(extensionCtx: IExtensionService): void {\n        throw new Error('Method not implemented.');\n    }\n}\n")),(0,r.kt)("p",null,"The code snippet above shows that the class ",(0,r.kt)("inlineCode",{parentName:"p"},"FirstExtension")," includes a method named ",(0,r.kt)("inlineCode",{parentName:"p"},"activate")," that will be running when the program is activated. We write the ",(0,r.kt)("strong",{parentName:"p"},"initialization")," logic of the extension in this method;",(0,r.kt)("inlineCode",{parentName:"p"},"dispose")," is normally used to ",(0,r.kt)("strong",{parentName:"p"},"cancel")," extension programme and do some ",(0,r.kt)("strong",{parentName:"p"},"recycling")," operations. Importing ",(0,r.kt)("inlineCode",{parentName:"p"},"folderTreeController")," including methods called ",(0,r.kt)("inlineCode",{parentName:"p"},"initFolderTree")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"handleSelectFolderTree")," is used to process the ",(0,r.kt)("strong",{parentName:"p"},"data initialization")," and ",(0,r.kt)("strong",{parentName:"p"},"event monitoring")," of ",(0,r.kt)("a",{parentName:"p",href:"./guides/extend-builtin-ui#foldertree"},"FolderTree"),"."),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"For more details about the ",(0,r.kt)("strong",{parentName:"p"},"Extension"),", please refer to ",(0,r.kt)("a",{parentName:"p",href:"/molecule/docs/next/guides/extension"},"Guides"),"."))),(0,r.kt)("h3",{id:"write-control-logic"},"Write control logic"),(0,r.kt)("p",null,"Let's have a look at the specific implementation logic of the ",(0,r.kt)("inlineCode",{parentName:"p"},"folderTreeController")," module:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"initFolderTree"),"\uff1a Responsible for obtaining the data of ",(0,r.kt)("a",{parentName:"li",href:"./guides/extend-builtin-ui#foldertree"},"FolderTree"),", and rendering the data to the ",(0,r.kt)("a",{parentName:"li",href:"./guides/extend-builtin-ui#foldertree"},"FolderTree")," component after success"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"handleSelectFolderTree"),"\uff1a Responsible for handling the ",(0,r.kt)("inlineCode",{parentName:"li"},"onSelectFile")," event of ",(0,r.kt)("a",{parentName:"li",href:"./guides/extend-builtin-ui#foldertree"},"FolderTree"),", after selecting the file, open it in ",(0,r.kt)("a",{parentName:"li",href:"./api/namespaces/molecule#editor"},"Editor"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="/src/extensions/theFirstExtension/folderTreeController.ts"',title:'"/src/extensions/theFirstExtension/folderTreeController.ts"'},"import molecule from '@dtinsight/molecule';\nimport { IFolderTreeNodeProps } from '@dtinsight/molecule/esm/model';\nimport { transformToEditorTab } from '../../common';\n\nimport { cloneDeep } from 'lodash';\nimport API from '../../api';\n\nexport async function initFolderTree() {\n    const res = await API.getFolderTree();\n    if (res.message === 'success') {\n        const folderTreeData = cloneDeep(res.data);\n        molecule.folderTree.add(folderTreeData);\n    }\n}\n\nexport function handleSelectFolderTree() {\n    molecule.folderTree.onSelectFile((file: IFolderTreeNodeProps) => {\n        molecule.editor.open(transformToEditorTab(file));\n    });\n}\n")),(0,r.kt)("p",null,"After fetching the data of FolderTree successfully through ",(0,r.kt)("inlineCode",{parentName:"p"},"API.getFolderTree")," ,we use the ",(0,r.kt)("a",{parentName:"p",href:"./api/classes/molecule.FolderTreeService#add"},(0,r.kt)("inlineCode",{parentName:"a"},"molecule.folderTree.add"))," method to add and display data to the ","[FolderTree]"," component; next, monitor ",(0,r.kt)("strong",{parentName:"p"},"the selected file")," through the ",(0,r.kt)("a",{parentName:"p",href:"./api/classes/molecule.FolderTreeService#onselectfile"},(0,r.kt)("inlineCode",{parentName:"a"},"molecule.folderTree.onSelectFile"))," method; finally,open the file through the ",(0,r.kt)("a",{parentName:"p",href:"./api/interfaces/molecule.IEditorService#open"},(0,r.kt)("inlineCode",{parentName:"a"},"molecule.editor.open"))," method."),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Pay more attention: In reality, the ",(0,r.kt)("strong",{parentName:"p"},"data type")," returned by ",(0,r.kt)("inlineCode",{parentName:"p"},"API.getFolderTree")," is not ",(0,r.kt)("a",{parentName:"p",href:"./api/interfaces/molecule.model.IFolderTreeNodeProps"},"IFolderTreeNodeProps")," type, we often need to go through a ",(0,r.kt)("strong",{parentName:"p"},"conversion")," method. The mock data of the ",(0,r.kt)("inlineCode",{parentName:"p"},"API.getFolderTree")," function in the example can be ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/DTStack/molecule-examples/blob/main/packages/molecule-demo/public/mock/folderTree.json"},"View"),". The ",(0,r.kt)("inlineCode",{parentName:"p"},"transformToEditorTab")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"handleSelectFolderTree")," method is a ",(0,r.kt)("strong",{parentName:"p"},"transformation")," method, which mainly converts ",(0,r.kt)("inlineCode",{parentName:"p"},"file")," to ",(0,r.kt)("a",{parentName:"p",href:"./api/interfaces/molecule.model.IEditorTab"},"IEditorTab")," type."))),(0,r.kt)("h3",{id:"use-extension"},"Use extension"),(0,r.kt)("p",null,"After defining class ",(0,r.kt)("inlineCode",{parentName:"p"},"FirstExtension"),", it is used with ",(0,r.kt)("a",{parentName:"p",href:"./api#create"},"create"),". Here we export all ",(0,r.kt)("strong",{parentName:"p"},"extension objects")," that need to be loaded in ",(0,r.kt)("inlineCode",{parentName:"p"},"extensions/index.ts")," by default:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="/src/extensions/index.ts"',title:'"/src/extensions/index.ts"'},"import { IExtension } from '@dtinsight/molecule/esm/model';\nimport { FirstExtension } from './theFirstExtension';\n\nconst extensions: IExtension[] = [new FirstExtension()];\n\nexport default extensions;\n")),(0,r.kt)("p",null,"Import the ",(0,r.kt)("inlineCode",{parentName:"p"},"FirstExtension")," object and instantiate it, and finally use ",(0,r.kt)("inlineCode",{parentName:"p"},"extensions")," to export all ",(0,r.kt)("strong",{parentName:"p"},"extension object instances"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="/src/app.tsx"',title:'"/src/app.tsx"'},"import extensions from './extensions';\n\nconst moInstance = create({\n    extensions,\n});\n")),(0,r.kt)("p",null,"Finally, introduce ",(0,r.kt)("inlineCode",{parentName:"p"},"extensions")," and pass in the ",(0,r.kt)("inlineCode",{parentName:"p"},"extensions")," property of ",(0,r.kt)("a",{parentName:"p",href:"./api#create"},"create"),"."),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The above example is just a very simple application scenario. If you want to achieve a richer extension to ",(0,r.kt)("a",{parentName:"p",href:"/molecule/docs/next/guides/extend-workbench"},"Workbench"),", you can refer to ",(0,r.kt)("a",{parentName:"p",href:"/molecule/docs/next/guides/extend-workbench"},"Workbench Extension Guide")," )."),(0,r.kt)("p",{parentName:"div"},"Otherwise,",(0,r.kt)("a",{parentName:"p",href:"/molecule/docs/next/guides/extension"},(0,r.kt)("strong",{parentName:"a"},"Extension"))," is the quite important concept in Molecule.\nThrough it, we can extend many core modules such as ",(0,r.kt)("a",{parentName:"p",href:"/molecule/docs/next/guides/extend-color-theme"},(0,r.kt)("strong",{parentName:"a"},"ColorTheme")),", ",(0,r.kt)("a",{parentName:"p",href:"/molecule/docs/next/guides/extend-workbench"},(0,r.kt)("strong",{parentName:"a"},"Workbench")),", ",(0,r.kt)("a",{parentName:"p",href:"/molecule/docs/next/guides/extend-locales"},(0,r.kt)("strong",{parentName:"a"},"i18n")),",\n",(0,r.kt)("a",{parentName:"p",href:"/molecule/docs/next/guides/extend-settings"},(0,r.kt)("strong",{parentName:"a"},"Settings")),", ",(0,r.kt)("a",{parentName:"p",href:"/molecule/docs/next/guides/extend-keybinding"},(0,r.kt)("strong",{parentName:"a"},"Keybinding")),", ",(0,r.kt)("a",{parentName:"p",href:"/molecule/docs/next/guides/extend-quick-access"},(0,r.kt)("strong",{parentName:"a"},"QuickAccess"))))),(0,r.kt)("h2",{id:"complete-example"},"Complete Example"),(0,r.kt)("p",null,"Please ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/DTStack/molecule-examples/tree/main/packages/molecule-demo/src/extensions/theFirstExtension"},"view")," the complete source code of ",(0,r.kt)("strong",{parentName:"p"},"First Extension")))}u.isMDXComponent=!0},12871:function(e,t,n){t.Z=n.p+"assets/images/the-first-extension-a3932fbf0cb09257acfb8e734a510ab5.png"}}]);